(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{356:function(e,t,n){"use strict";n(16),n(17),n(4),n(43);var r=n(10),o=n(351),c={data:function(){return{refModal:!1,tab:null,modal:!1,yearInput:null,monthInput:null,disp:{year:null,month:null},repHeaders:[{text:"親科目",value:"pacc"},{text:"科目",value:"acc"},{text:"金額",value:"amount"},{text:"前月比",value:"ratio"}],groupby:["faNo"],refHeaders:[{text:"伝票番号",value:"faNo"},{text:"転記日",value:"postDate"},{text:"伝票金額",value:"hTotal"},{text:"明細番号",value:"entryNo"},{text:"科目ID",value:"accId"},{text:"科目名",value:"accName"},{text:"内容・内訳",value:"entryTxt"},{text:"明細金額",value:"entrySumWithSign"}],chart:{options:{labels:[],dataLabels:{formatter:function(e,t){return[t.w.globals.labels[t.seriesIndex],e.toFixed(1)+"%"]}},legend:{show:!1}},series:[]}}},props:["search","cond"],components:{apexchart:n.n(o).a},computed:{repItems:function(){return this.$store.getters["fa/RepItems"]},refItems:function(){return this.$store.getters["fa/RefItems"]},repRatio:function(){return this.$store.getters["fa/RepRatio"]}},mounted:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new Date,e.yearInput=n.getFullYear(),e.monthInput=n.getMonth()+1,e.disp.year=n.getFullYear(),e.disp.month=n.getMonth()+1,t.next=7,e.$store.dispatch("fa/GetAccRep");case 7:case"end":return t.stop()}}),t)})))()},methods:{filterOnlyCapsText:function(e,t,n){return null!=e&&null!=t&&"string"==typeof e&&-1!==e.toString().toLocaleUpperCase().indexOf(t)},onClickRow:function(data){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n={}).gacc=data.acc.substr(0,6),n.year=e.disp.year,n.month=e.disp.month,t.next=6,e.$store.dispatch("fa/GetAccRepRatio",n);case 6:return e.chart.options.labels=e.repRatio.labels,e.chart.series=e.repRatio.series,window.dispatchEvent(new Event("resize")),t.next=11,e.$store.dispatch("fa/SearchFaEntryWithAcc",n);case 11:e.refModal=!0;case 12:case"end":return t.stop()}}),t)})))()},onClickRefRow:function(data){var e=$nuxt.$router.resolve("/hfa/docdtl/"+data.faNo);window.open(e.href,"_blank")},onChangePeriod:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e.yearInput&&""!=e.yearInput&&null!=e.monthInput&&""!=e.monthInput){t.next=3;break}return e.modal=!0,t.abrupt("return");case 3:return e.disp.year=e.yearInput,e.disp.month=e.monthInput,t.next=7,e.$store.dispatch("fa/GetAccRepPeriod",e.disp);case 7:if(t.sent){t.next=9;break}e.modal=!0;case 9:case"end":return t.stop()}}),t)})))()}}},l=n(38),d=n(65),v=n.n(d),f=n(152),m=n(134),h=n(57),x=n(384),y=n(333),k=n(429),w=n(334),_=n(407),I=n(426),R=n(441),C=n(439),V=n(421),T=n(420),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.cond?n("v-container",{staticStyle:{"margin-bottom":"20px"}},[n("v-row",[n("v-col",{attrs:{lg:"4",md:"4",sm:"4",cols:"4"}},[n("v-text-field",{attrs:{label:"年","single-line":"","hide-details":"",color:"accent",type:"number"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onChangePeriod(t)}},model:{value:e.yearInput,callback:function(t){e.yearInput=t},expression:"yearInput"}})],1),e._v(" "),n("v-col",{attrs:{lg:"4",md:"4",sm:"4",cols:"4"}},[n("v-text-field",{attrs:{label:"月","single-line":"","hide-details":"",color:"accent",type:"number"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onChangePeriod(t)}},model:{value:e.monthInput,callback:function(t){e.monthInput=t},expression:"monthInput"}})],1),e._v(" "),n("v-col",{attrs:{lg:"4",md:"4",sm:"4",cols:"4"}},[n("v-btn",{attrs:{block:"",color:"primary"},on:{click:e.onChangePeriod}},[e._v("\n          期間変更\n        ")])],1)],1)],1):e._e(),e._v(" "),n("v-text-field",{staticStyle:{"margin-bottom":"15px","margin-top":"-10px"},attrs:{label:"Search","single-line":"","hide-details":"",color:"accent"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),n("v-data-table",{attrs:{headers:e.repHeaders,items:e.repItems,"hide-default-footer":!0,"custom-filter":e.filterOnlyCapsText,search:e.search},on:{"click:row":e.onClickRow}}),e._v(" "),n("v-dialog",{attrs:{"max-width":"90%"},model:{value:e.refModal,callback:function(t){e.refModal=t},expression:"refModal"}},[n("v-card",[n("v-card-title",[e._v("Detail")]),e._v(" "),n("v-card-text",[n("v-tabs",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("v-tab",[e._v("\n              明細一覧\n            ")]),e._v(" "),n("v-tab",[e._v("\n              科目別比率\n            ")])],1),e._v(" "),n("v-tabs-items",{staticStyle:{"margin-top":"20px"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("v-tab-item",[n("v-data-table",{attrs:{headers:e.refHeaders,items:e.refItems,"show-group-by":!0},on:{"click:row":e.onClickRefRow}})],1),e._v(" "),n("v-tab-item",[n("apexchart",{attrs:{type:"pie",height:"300",options:e.chart.options,series:e.chart.series}})],1)],1)],1),e._v(" "),n("v-card-actions",[n("div",{staticClass:"flex-grow-1"}),e._v(" "),n("v-btn",{attrs:{color:"accent"},on:{click:function(t){e.refModal=!1}}},[e._v("閉じる")])],1)],1)],1),e._v(" "),n("v-dialog",{attrs:{"max-width":"290"},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[n("v-card",[n("v-card-title",[e._v("Info")]),e._v(" "),n("v-card-text",[e._v("\n        指定年月が不正か、対象データが存在しません\n      ")]),e._v(" "),n("v-card-actions",[n("div",{staticClass:"flex-grow-1"}),e._v(" "),n("v-btn",{attrs:{color:"accent"},on:{click:function(t){e.modal=!1}}},[e._v("OK")])],1)],1)],1)],1)}),[],!1,null,"5f22021a",null);t.a=component.exports;v()(component,{VBtn:f.a,VCard:m.a,VCardActions:h.a,VCardText:h.b,VCardTitle:h.c,VCol:x.a,VContainer:y.a,VDataTable:k.a,VDialog:w.a,VRow:_.a,VTab:I.a,VTabItem:R.a,VTabs:C.a,VTabsItems:V.a,VTextField:T.a})},435:function(e,t,n){"use strict";n.r(t);var r={middleware:"authenticated",data:function(){return{}},components:{AccRep:n(356).a}},o=n(38),c=n(65),l=n.n(c),d=n(333),v=n(359),component=Object(o.a)(r,(function(){var e=this.$createElement,t=this._self._c||e;return t("v-layout",{attrs:{column:"","justify-center":"","align-center":""}},[t("v-container",[t("h2",[this._v("科目別集計")]),this._v(" "),t("AccRep",{attrs:{cond:!0}})],1)],1)}),[],!1,null,null,null);t.default=component.exports;l()(component,{VContainer:d.a,VLayout:v.a})}}]);